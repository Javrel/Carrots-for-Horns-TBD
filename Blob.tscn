[gd_scene load_steps=4 format=2]

[ext_resource path="res://icon.png" type="Texture" id=1]

[sub_resource type="GDScript" id=1]
script/source = "extends KinematicBody2D

var velocity = Vector2(0,0)
var power = 0
var on_ground = false

const MAX_POWER = 1000
const GRAVITY = 20

func increment_power():
	if power < MAX_POWER:
		power += 20
		
func _physics_process(delta):
	if on_ground:
		if Input.is_action_pressed(\"ui_left\"):
			# velocity.x = -SPEED
			increment_power()
		elif Input.is_action_pressed(\"ui_right\"):
			# velocity.x = SPEED
			increment_power()
		if Input.is_action_just_released(\"ui_right\"):
			# jump and reset power
			velocity.y = -power*2
			velocity.x = power
			power = 0
		if Input.is_action_just_released(\"ui_left\"):
			# jump and reset power
			velocity.y = -power*2
			velocity.x = -power
			power = 0
				
	velocity.y += GRAVITY
	
	velocity = move_and_slide(velocity,Vector2(0,-1))
	
	if is_on_floor():
		on_ground = true
	else:
		on_ground = false
		velocity.y += GRAVITY
	
	if on_ground:
		velocity.x = lerp(velocity.x, 0, 0.1)	
	else:
		velocity.x = lerp(velocity.x, 0, 0.01)	
"

[sub_resource type="CapsuleShape2D" id=2]
radius = 31.0
height = 2.0

[node name="Blob" type="KinematicBody2D"]
script = SubResource( 1 )
__meta__ = {
"_edit_group_": true
}

[node name="Sprite" type="Sprite" parent="."]
texture = ExtResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource( 2 )
