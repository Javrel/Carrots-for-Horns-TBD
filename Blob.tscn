[gd_scene load_steps=7 format=2]

[ext_resource path="res://icon.png" type="Texture" id=1]
[ext_resource path="res://assets/sounds/Jumphigh.mp3" type="AudioStream" id=2]
[ext_resource path="res://assets/sounds/Jumplow.mp3" type="AudioStream" id=3]
[ext_resource path="res://assets/sounds/Medium_Fall.mp3" type="AudioStream" id=4]

[sub_resource type="GDScript" id=1]
script/source = "extends KinematicBody2D

var velocity = Vector2(0,0)
var power = 0
var on_ground = false

const MAX_POWER = 1000
const GRAVITY = 20

func increment_power():
	if power < MAX_POWER:
		power += 20

func decrement_power():
	if abs(power) < MAX_POWER:
		power -= 20
		
func jump():
	# jump and reset power
	velocity.y = -abs(power)*2
	velocity.x = power
	if power <=(MAX_POWER/2):
		$soundjumplow.play()
	else:
		$soundjumphigh.play()
	power = 0
	
func _physics_process(delta):
	if on_ground:
		if Input.is_action_pressed(\"ui_left\"):
			# velocity.x = -SPEED
			decrement_power()
		elif Input.is_action_pressed(\"ui_right\"):
			# velocity.x = SPEED
			increment_power()
		if Input.is_action_just_released(\"ui_right\") or Input.is_action_just_released(\"ui_left\"):
			jump()
			
				
	velocity.y += GRAVITY
	
	velocity = move_and_slide(velocity,Vector2(0,-1))

	

	if is_on_floor():
		if not on_ground:
		  $soundfallmed.play()	
		  on_ground = true
	else:
		on_ground = false
		velocity.y += GRAVITY
	
	if on_ground:
		velocity.x = lerp(velocity.x, 0, 0.1)	
	else:
		velocity.x = lerp(velocity.x, 0, 0.01)	
"

[sub_resource type="CapsuleShape2D" id=2]
radius = 31.0
height = 2.0

[node name="Blob" type="KinematicBody2D"]
script = SubResource( 1 )
__meta__ = {
"_edit_group_": true
}

[node name="Sprite" type="Sprite" parent="."]
texture = ExtResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource( 2 )

[node name="soundjumphigh" type="AudioStreamPlayer" parent="."]
pause_mode = 1
stream = ExtResource( 2 )

[node name="soundjumplow" type="AudioStreamPlayer" parent="."]
pause_mode = 1
stream = ExtResource( 3 )

[node name="soundfallmed" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource( 4 )
